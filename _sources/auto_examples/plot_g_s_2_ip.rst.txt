
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_examples/plot_g_s_2_ip.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_auto_examples_plot_g_s_2_ip.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_plot_g_s_2_ip.py:


gEQDSK + statefile to input.profiles
====================================
This example shows how OMAS can be used to generate a GACODE input.profiles
file given a gEQDSK file and a ONETWO statefile.

.. GENERATED FROM PYTHON SOURCE LINES 9-40



.. image-sg:: /auto_examples/images/sphx_glr_plot_g_s_2_ip_001.png
   :alt: plot g s 2 ip
   :srcset: /auto_examples/images/sphx_glr_plot_g_s_2_ip_001.png
   :class: sphx-glr-single-img


.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    SyntaxWarning: "is not" with a literal. Did you mean "!="? (omfit_gacode.py@243)
    0) pow_e_aux += i_vol(qohm[electrons.energy])/1e+06
    1) pow_ei -= i_vol(qdelt[electrons.energy])/2e+06
    1) pow_ei += i_vol(qdelt[total_ion_energy])/2e+06
    2) pow_e_line -= i_vol(qrad[electrons.energy])/1e+06
    3) pow_e_aux += i_vol(qione[electrons.energy])/1e+06
    4) pow_e_aux += i_vol(qbeame[electrons.energy])/1e+06
    7) pow_i_aux += i_vol(qioni[total_ion_energy])/1e+06
    8) pow_i_aux += i_vol(qcx[total_ion_energy])/1e+06
    9) pow_i_aux += i_vol(qbeami[total_ion_energy])/1e+06
    12) flow_wall += i_vol(sion_thermal_e[electrons.particles])/6.24e+21
    13) flow_beam += i_vol(sbeame[electrons.particles])/6.24e+21
    14) flow_wall += i_vol(srecom_e[electrons.particles])/6.24e+21
    16) flow_mom += i_vol(storqueb[momentum_tor])/1






|

.. code-block:: default


    from matplotlib import pyplot
    import os
    from omas import *

    from omfit_classes.omfit_eqdsk import OMFITgeqdsk
    from omfit_classes.omfit_onetwo import OMFITstatefile
    from omfit_classes.omfit_gacode import OMFITinputprofiles

    gfilename = omas_dir + 'samples/g145419.02100'  # gEQDSK file
    sfilename = omas_dir + 'samples/state145419_02100.nc'  # ONETWO statefile
    ipfilename = omas_dir + 'samples/input.profiles_145419_02100'  # input.profiles generated with PROFILES_GEN

    # load OMFIT classes
    gEQDSK = OMFITgeqdsk(gfilename)
    statefile = OMFITstatefile(sfilename)
    ip = OMFITinputprofiles(ipfilename)

    # equilibrium ods from gEQDSK (and fluxSurfaces)
    ods = gEQDSK.to_omas()

    # append core profiles and sources based on ONETWO statefile
    ods = statefile.to_omas(ods)

    # generate new input.profiles file
    ip1 = OMFITinputprofiles(ipfilename).from_omas(ods)

    # compare the input.profiles file generated by PROFILES_GEN and the one generated via OMFIT+OMAS
    ip.plot()
    ip1.plot()
    pyplot.show()


.. _sphx_glr_download_auto_examples_plot_g_s_2_ip.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example




    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: plot_g_s_2_ip.py <plot_g_s_2_ip.py>`

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: plot_g_s_2_ip.ipynb <plot_g_s_2_ip.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
