
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_examples/omas_dynamic_nc.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_auto_examples_omas_dynamic_nc.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_omas_dynamic_nc.py:


Dynamic loading of NetCDF data
==============================
This example illustrates how OMAS can load in memory only the data when it is first requested.
What is done here for NC file, also works also for IMAS.

.. GENERATED FROM PYTHON SOURCE LINES 9-43

.. code-block:: default


    import os
    from omas import *

    # set OMAS_DEBUG_TOPIC to see when data is loaded dynamically
    os.environ['OMAS_DEBUG_TOPIC'] = 'dynamic'

    # generate some data and save it as a netcdf file
    ods = ODS().sample(ntimes=2)
    ods.save('test.nc')

    # ODS.open() will keep the file descriptor open so that OMAS
    # can load in memory only the data when it is first requested
    # NOTE: one can use the `with` statement or open()/close()
    ods = ODS()
    with ods.open('test.nc'):
        # data gets read from NC file when first requested
        print(ods['equilibrium.time_slice.:.global_quantities.ip'])
        # then it is in memory
        print(ods['equilibrium.time_slice.0.global_quantities.ip'])

    # save it as a pickle
    ods.save('test.pkl')

    # load the data back
    ods = ODS()
    ods.load('test.pkl')

    # the data that was loaded is stored in the pickle
    print(ods.flat().keys())

    # continue loading more data
    with ods.open('test.nc'):
        print(ods['equilibrium.time'])


.. _sphx_glr_download_auto_examples_omas_dynamic_nc.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example




    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: omas_dynamic_nc.py <omas_dynamic_nc.py>`

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: omas_dynamic_nc.ipynb <omas_dynamic_nc.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
