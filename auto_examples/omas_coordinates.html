
<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Coordinates interpolation &#8212; OMAS</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css?v=49fa7461" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=61a4c737" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          <!-- OMAS-->
        </a>
        <!-- <span class="navbar-text navbar-version pull-left"><b></b></span> -->
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../how.html">Concept</a></li>
                <li><a href="index.html">Examples</a></li>
                <li><a href="../install.html">Installation</a></li>
                <li><a href="../iter.html">ITER</a></li>
                <li><a href="../omfit.html">OMFIT</a></li>
                <li><a href="../schema.html">Data schema</a></li>
                <li><a href="../code.html">API</a></li>
            
            
              
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">In this page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Coordinates interpolation</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>
           <!-- 
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
           -->
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#sphx-glr-download-auto-examples-omas-coordinates-py"><span class="std std-ref">Go to the end</span></a>
to download the full example code</p>
</div>
<section class="sphx-glr-example-title" id="coordinates-interpolation">
<span id="sphx-glr-auto-examples-omas-coordinates-py"></span><h1>Coordinates interpolation<a class="headerlink" href="#coordinates-interpolation" title="Link to this heading">Â¶</a></h1>
<p>This example illustrates how OMAS can automatically interpolate data
defined on coordinates that were already present in the data structure.
This feature is extremely useful when different codes that have different
computational grids need to read/write parts of the same data structure.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">from</span> <span class="nn">omas</span> <span class="kn">import</span> <span class="o">*</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
<span class="c1"># SET: if a coordinate exists, then that is the coordinate that it is used</span>
<span class="n">ods1</span> <span class="o">=</span> <span class="n">ODS</span><span class="p">()</span>
<span class="n">ods1</span><span class="p">[</span><span class="s1">&#39;equilibrium.time_slice[0].profiles_1d.psi&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="k">with</span> <span class="n">omas_environment</span><span class="p">(</span><span class="n">ods1</span><span class="p">,</span> <span class="n">coordsio</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;equilibrium.time_slice[0].profiles_1d.psi&#39;</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)}):</span>
    <span class="n">ods1</span><span class="p">[</span><span class="s1">&#39;equilibrium.time_slice[0].profiles_1d.f&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ods1 f has length </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">ods1</span><span class="p">[</span><span class="s1">&#39;equilibrium.time_slice[0].profiles_1d.f&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
<p>A prints the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">A</span>
<span class="n">ods1</span> <span class="n">f</span> <span class="n">has</span> <span class="n">length</span> <span class="mi">10</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>
<span class="c1"># SET: if a does not exists, then that coordinate is set</span>
<span class="n">ods2</span> <span class="o">=</span> <span class="n">ODS</span><span class="p">()</span>
<span class="k">with</span> <span class="n">omas_environment</span><span class="p">(</span><span class="n">ods2</span><span class="p">,</span> <span class="n">coordsio</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;equilibrium.time_slice[0].profiles_1d.psi&#39;</span><span class="p">:</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)}):</span>
    <span class="n">ods2</span><span class="p">[</span><span class="s1">&#39;equilibrium.time_slice[0].profiles_1d.pressure&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ods2 p has length </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">ods2</span><span class="p">[</span><span class="s1">&#39;equilibrium.time_slice[0].profiles_1d.pressure&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
<p>B the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">B</span>
<span class="n">ods2</span> <span class="n">p</span> <span class="n">has</span> <span class="n">length</span> <span class="mi">5</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
<span class="c1"># SET: coordinates can be taken from existing ODSs</span>
<span class="n">ods3</span> <span class="o">=</span> <span class="n">ODS</span><span class="p">()</span>
<span class="k">with</span> <span class="n">omas_environment</span><span class="p">(</span><span class="n">ods3</span><span class="p">,</span> <span class="n">coordsio</span><span class="o">=</span><span class="n">ods1</span><span class="p">):</span>
    <span class="n">ods3</span><span class="p">[</span><span class="s1">&#39;equilibrium.time_slice[0].profiles_1d.f&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ods1</span><span class="p">[</span><span class="s1">&#39;equilibrium.time_slice[0].profiles_1d.f&#39;</span><span class="p">]</span>
<span class="k">with</span> <span class="n">omas_environment</span><span class="p">(</span><span class="n">ods3</span><span class="p">,</span> <span class="n">coordsio</span><span class="o">=</span><span class="n">ods2</span><span class="p">):</span>
    <span class="n">ods3</span><span class="p">[</span><span class="s1">&#39;equilibrium.time_slice[0].profiles_1d.pressure&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ods2</span><span class="p">[</span><span class="s1">&#39;equilibrium.time_slice[0].profiles_1d.pressure&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ods3 f has length </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">ods3</span><span class="p">[</span><span class="s1">&#39;equilibrium.time_slice[0].profiles_1d.f&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ods3 p has length </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">ods3</span><span class="p">[</span><span class="s1">&#39;equilibrium.time_slice[0].profiles_1d.pressure&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
<p>C prints the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C</span>
<span class="n">ods3</span> <span class="n">f</span> <span class="n">has</span> <span class="n">length</span> <span class="mi">10</span>
<span class="n">ods3</span> <span class="n">p</span> <span class="n">has</span> <span class="n">length</span> <span class="mi">10</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>
<span class="c1"># SET: order matters</span>
<span class="n">ods4</span> <span class="o">=</span> <span class="n">ODS</span><span class="p">()</span>
<span class="k">with</span> <span class="n">omas_environment</span><span class="p">(</span><span class="n">ods4</span><span class="p">,</span> <span class="n">coordsio</span><span class="o">=</span><span class="n">ods2</span><span class="p">):</span>
    <span class="n">ods4</span><span class="p">[</span><span class="s1">&#39;equilibrium.time_slice[0].profiles_1d.pressure&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ods2</span><span class="p">[</span><span class="s1">&#39;equilibrium.time_slice[0].profiles_1d.pressure&#39;</span><span class="p">]</span>
<span class="k">with</span> <span class="n">omas_environment</span><span class="p">(</span><span class="n">ods4</span><span class="p">,</span> <span class="n">coordsio</span><span class="o">=</span><span class="n">ods1</span><span class="p">):</span>
    <span class="n">ods4</span><span class="p">[</span><span class="s1">&#39;equilibrium.time_slice[0].profiles_1d.f&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ods1</span><span class="p">[</span><span class="s1">&#39;equilibrium.time_slice[0].profiles_1d.f&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ods4 f has length </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">ods4</span><span class="p">[</span><span class="s1">&#39;equilibrium.time_slice[0].profiles_1d.f&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ods4 p has length </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">ods4</span><span class="p">[</span><span class="s1">&#39;equilibrium.time_slice[0].profiles_1d.pressure&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">()</span>
</pre></div>
</div>
<p>D prints the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">D</span>
<span class="n">ods4</span> <span class="n">f</span> <span class="n">has</span> <span class="n">length</span> <span class="mi">5</span>
<span class="n">ods4</span> <span class="n">p</span> <span class="n">has</span> <span class="n">length</span> <span class="mi">5</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;E&#39;</span><span class="p">)</span>
<span class="c1"># GET: ods can be queried on different coordinates</span>
<span class="k">with</span> <span class="n">omas_environment</span><span class="p">(</span><span class="n">ods4</span><span class="p">,</span> <span class="n">coordsio</span><span class="o">=</span><span class="n">ods1</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ods4 f is returned with length </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">ods4</span><span class="p">[</span><span class="s1">&#39;equilibrium.time_slice[0].profiles_1d.f&#39;</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ods4 f is returned with length </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">ods4</span><span class="p">[</span><span class="s1">&#39;equilibrium.time_slice[0].profiles_1d.f&#39;</span><span class="p">]))</span>
</pre></div>
</div>
<p>E prints the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">E</span>
<span class="n">ods4</span> <span class="n">f</span> <span class="ow">is</span> <span class="n">returned</span> <span class="k">with</span> <span class="n">length</span> <span class="mi">10</span>
<span class="n">ods4</span> <span class="n">f</span> <span class="ow">is</span> <span class="n">returned</span> <span class="k">with</span> <span class="n">length</span> <span class="mi">5</span>
</pre></div>
</div>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-omas-coordinates-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../_downloads/63fca34f3a147794cbba3ddb1844ddba/omas_coordinates.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">omas_coordinates.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../_downloads/946ea5d84d7675932aafbc28499b4772/omas_coordinates.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">omas_coordinates.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
      
    </p>
    <p>
        &copy; Copyright 2017-2025 O. Meneghini and collaborators.<br/>
      Last updated on Feb 27, 2025.<br/>
    </p>
  </div>
</footer>
  </body>
</html>